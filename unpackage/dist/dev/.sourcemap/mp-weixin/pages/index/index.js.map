{"version":3,"sources":["webpack:///D:/study/hbuilderx/GraduationAlbum/main.js","webpack:///D:/study/hbuilderx/GraduationAlbum/pages/index/index.vue?3cf8","webpack:///D:/study/hbuilderx/GraduationAlbum/pages/index/index.vue?9319","webpack:///D:/study/hbuilderx/GraduationAlbum/pages/index/index.vue?eb2a","webpack:///D:/study/hbuilderx/GraduationAlbum/pages/index/index.vue?3af3","webpack:///D:/study/hbuilderx/GraduationAlbum/pages/index/index.vue"],"names":["createPage","Page","data","tempPhotoUrl","booksInfo","_id","studentSchool","studentDepartment","studentClass","studentName","studentID","photoUrl","leaveMsg","bookTemplate","methods","choosePhoto","_this","chooseImage","Promise","resolve","reject","uni","count","sizeType","sourceType","success","res","tempFilePaths","submitToDatabase","uploadPhoto","uniCloud","uploadFile","filePath","onUploadProgress","progressEvent","fileID","submitInfo","callFunction","name","getApp","globalData","yourData","console","log","onShow"],"mappings":"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","file":"pages/index/index.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/index/index.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./index.vue?vue&type=template&id=0f0736a4&\"\nvar renderjs\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"study/hbuilderx/GraduationAlbum/pages/index/index.vue\"\nexport default component.exports","export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=template&id=0f0736a4&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./index.vue?vue&type=script&lang=js&\"","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n\tdata() {\n\t\treturn {\n\t\t\ttempPhotoUrl:'',\n\t\t\tbooksInfo : [{\n\t\t\t\t_id:'',\n\t\t\t\tstudentSchool: '',\n\t\t\t\tstudentDepartment: '',\n\t\t\t\tstudentClass: '',\n\t\t\t\tstudentName:'',\n\t\t\t\tstudentID:'',\n\t\t\t\tphotoUrl:'',\n\t\t\t\tleaveMsg:'',\n\t\t\t\tbookTemplate:''\n\t\t\t}]\n\t\t}\n\t},\n\tmethods: {\n\t\tchoosePhoto:async function(){\n\t\t\tlet _this = this;\n\t\t\t\n\t\t\tconst chooseImage = function() {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\n\t\t\t\t\tuni.chooseImage({\n\t\t\t\t\t\tcount: 1, //默认9\n\t\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\n\t\t\t\t\t\tsourceType: ['album'], //从相册选择\n\t\t\t\t\t\tsuccess: function(res) {\n\t\t\t\t\t\t\t//console.log(res.tempFilePaths);\n\t\t\t\t\t\t\t//console.log(res.tempFiles);\n\t\t\t\t\t\t\tresolve(res.tempFilePaths[0])\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t\t_this.tempPhotoUrl = await chooseImage();\n\t\t},\n\t\tsubmitToDatabase:async function(){\n\t\t\tlet _this = this;\n\t\t\t\n\t\t\tconst uploadPhoto = function() {\n\t\t\t\treturn new Promise(function(resolve, reject) {\n\t\t\t\t\tuniCloud.uploadFile({\n\t\t\t\t\t\tfilePath: _this.tempPhotoUrl,\n\t\t\t\t\t\tonUploadProgress: function(progressEvent) {\n\t\t\t\t\t\t\t// console.log(progressEvent);\n\t\t\t\t\t\t\t// var percentCompleted = Math.round(\n\t\t\t\t\t\t\t// \t(progressEvent.loaded * 100) / progressEvent.total\n\t\t\t\t\t\t\t// );\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuccess:function(res){\n\t\t\t\t\t\t\tresolve(res.fileID);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\t\t\tconst submitInfo = function(){\n\t\t\t\treturn new Promise(function(resolve,reject){\n\t\t\t\t\tuniCloud.callFunction({\n\t\t\t\t\t\tname: 'addBooksInfo',\n\t\t\t\t\t\tdata: {\n\t\t\t\t\t\t\tstudentSchool: getApp().globalData.yourData.studentSchool,\n\t\t\t\t\t\t\tstudentDepartment: getApp().globalData.yourData.studentDepartment,\n\t\t\t\t\t\t\tstudentClass: getApp().globalData.yourData.studentClass,\n\t\t\t\t\t\t\tstudentID:getApp().globalData.yourData.studentID,\n\t\t\t\t\t\t\tstudentName:getApp().globalData.yourData.studentName,\n\t\t\t\t\t\t\tphotoUrl:_this.booksInfo[0].photoUrl,\n\t\t\t\t\t\t\tleaveMsg:_this.booksInfo[0].leaveMsg,\n\t\t\t\t\t\t\tbookTemplate:''\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t})\n\t\t\t}\n\t\t\t\n\n\t\t\tif(_this.tempPhotoUrl==''||\n\t\t\t_this.booksInfo[0].leaveMsg==''){\n\t\t\t\tconsole.log('信息不能为空');\n\t\t\t}else{\n\t\t\t\tconsole.log(\"成功上传\");\n\t\t\t\t_this.booksInfo[0].photoUrl = await uploadPhoto();\n\t\t\t\tawait submitInfo();\n\t\t\t}\n\t\t}\n\t},\n\tonShow: function() {\n\t\tconsole.log('index Show');\n\t\t\n\t\t// if(getApp().globalData.yourData._id==''){\n\t\t// \tconsole.log(\"未注册\");\n\t\t// \tuni.switchTab({\n\t\t// \t\turl: '../information/information'\n\t\t// \t});\n\t\t// }\n\t}\n}\n"],"sourceRoot":""}